 
<html>

<!--
  *     Copyright © 2005 Sun Microsystems, Inc. All rights reserved.
  *     Use is subject to license terms.
-->
<head>


<title>Configuring CMP Mappings</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="StyleSheet" href="nbdocs://org.netbeans.modules.usersguide/org/netbeans/modules/usersguide/ide.css" type="text/css">

</head>
<body>
<h2>Configuring CMP Mappings</h2>
<p><small><a href="#seealso">See Also</a></small></p>
<p>If you are deploying to the Sun Java System Application Server, the CMP mappings 
  for your EJB module are stored in the module's <tt>src/conf/sun-cmp-mappings.xml</tt> 
  file. You may need to change the CMP mappings of your entity beans in the following 
  situations:</p>
<ul>
  <li>The generated defaults are not adequate</li>
  <li>You have modified your bean</li>
  <li>You have modified your schema</li>
</ul>
<p> When you map the beans in the Sun Configuration editor, you specify the schema 
  and the primary table for each bean. Each bean must be mapped to at least one 
  table within a single database schema. You can also map a bean to a secondary 
  table. All beans related by container-managed relationships must be mapped to 
  tables in the same schema.</p>
<p><b>To map a CMP entity bean to a database:</b></p>
<ol>
  <li>If you do not have a database schema, you can capture the schema by selecting 
    Databases &gt; Schema in the New File wizard and saving the schema in the 
    <tt>src/conf</tt> directory of your project.</li>
  <li>In the Projects window, expand the Configuration Files node for your EJB 
    module and double-click <tt>sun-cmp-mappings.xml</tt> or <tt>sun-ejb-jar.xml</tt>. 
    <ul class="note">
      <li>If either <tt>sun-cmp-mappings</tt> or <tt>sun-ejb-jar.xml</tt> are 
        open in the text mode, you cannot open the visual editor. You first have 
        to close the text mode tabs in the Source Editor.</li>
    </ul>
  </li>
  <li>Expand the Sun Configuration node and select the bean you want to map.</li>
  <li>In the Cmp Mapping tab of the bean, click Advanced Settings and choose the 
    database schema from the combo box in the dialog box and click OK.</li>
  <li>Select the primary table for the bean from the Primary Table drop-down list 
    in the CMP Mapping tab.</li>
  <li>You can click Automap All to automatically map the fields according to the 
    schema. You may still need to map some fields manually if any of the fields 
    are not mapped correctly. For example, if the Field name and the Mapped Column 
    name do not match, the IDE may not recognize they should be mapped to each 
    other.</li>
  <li>To manually map a bean field, select the appropriate entry in the Mapped 
    Column column. You can choose any of the following: 
    <ul>
      <li><b>A single column name.</b> Maps the field to a single column in the 
        primary table.</li>
      <li><tt><b><a href="fields_mult_cols.html">&lt;map multiple columns&gt;</a></b></tt><b>.</b> 
        Maps the field to multiple columns in the primary and secondary tables.</li>
      <li><tt><b><a href="map_rel_fields.html">&lt;mapped relationship&gt;</a></b></tt><b>.</b> 
        Configures a container-managed relationship between two tables.</li>
    </ul>
  </li>
</ol>
<p>The IDE saves your changes to the <tt>sun-cmp-mappings.xml</tt> file when you 
  save your changes.</p>
<ul class="note">
  <li>If you are using a mapping file (<tt>sun-cmp-mappings.xml</tt>) without 
    capturing the database meta data (a schema file), your mapping is not shown 
    in the Field Mappings table. However, this mapping file is still valid and 
    deployable. You can continue to use this mapping file.</li>
</ul>
<dl> 
  <dt><a name="seealso">See Also</a></dt>
  <dd><a href="nbdocs://org.netbeans.modules.j2ee.platform/org/netbeans/modules/j2ee/platform/docs/ejb/general/about_cmp.html">About EJB 2.1 CMP Mappings</a></dd>
  <dd><a href="nbdocs://org.netbeans.modules.j2ee.platform/org/netbeans/modules/j2ee/platform/docs/ejb/editing/generate_cmp_beans.html">Generating CMP Entity Beans from a Database</a></dd>
  <dd><a href="nbdocs://org.netbeans.modules.dbschema/org/netbeans/modules/dbschema/docs/dbschema.html">Obtaining a Database Schema</a></dd>
  <dd><a href="map_bean_to_db.html">Configuring CMP Mappings</a></dd>
  <dd><a href="fields_mult_cols.html">Mapping CMP Fields to Multiple Columns</a> 
  </dd>
</dl>
<hr>
<small> <a href="../credits.html">Legal Notices</a></small> 
<table cellpadding="50" border="0"> 
<tr><td>&nbsp;</td></tr> 
   </table> 
</body>

</html>