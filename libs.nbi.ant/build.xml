<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See harness/README in the NetBeans platform -->
<!-- for some information on what you could do (e.g. targets to override). -->
<!-- If you delete this file and reopen the project it will be recreated. -->
<project basedir="." name="libs.nbi.ant" default="netbeans">
    <description>Builds, tests, and runs the project org.netbeans.libs.nbi.ant</description>
    <import file="../nbbuild/templates/projectized.xml"/>

    <target name="build-nbi-ant-tasks" depends="init">
         <ant dir="${basedir}/../nbi/engine" target="jar" inheritAll="false">
            <property name="platforms.JDK_1.5.home" value="${nbjdk.home}"/>
            <property name="no.dependencies" value="true"/>
         </ant>
         <ant dir="${basedir}/../nbi/infra/lib/registries-management" target="jar" inheritAll="false">
            <property name="platforms.JDK_1.5.home" value="${nbjdk.home}"/>
            <property name="no.dependencies" value="true"/>
            <property name="libs.Ant1.6.5.classpath" value="${ant.core.lib}"/>
         </ant>

         <ant dir="${basedir}/../nbi/infra/build/.ant-lib" target="jar" inheritAll="false">
            <property name="platforms.JDK_1.5.home" value="${nbjdk.home}"/>
            <property name="no.dependencies" value="true"/>
            <property name="libs.Ant1.6.5.classpath" value="${ant.core.lib}"/>
         </ant>
    </target>

    <target name="jar" depends="init,build-nbi-ant-tasks,projectized-common.jar"/>


    <target name="netbeans-extra">
         <copy file="${basedir}/../nbi/infra/build/.ant-lib/dist/nbi-ant-tasks.jar" todir="${cluster}/modules/ext"/> 
         <copy file="${basedir}/../nbi/infra/lib/registries-management/dist/registries-management.jar" tofile="${cluster}/modules/ext/nbi-registries-management.jar"/> 
         <copy todir="${cluster}/nbi/.common">
             <fileset dir="${basedir}/../nbi/infra/build/.common">
                <exclude name=".templates/**"/>
             </fileset>
         </copy>
         <copy todir="${cluster}/nbi/stub">
             <fileset dir="${basedir}/stub">
                <exclude name="ext/engine/build/"/>
                <exclude name="ext/engine/dist/"/>
                <exclude name="ext/engine/nbproject/private/"/>
                <exclude name="ext/components/products/helloworld/build/"/>
                <exclude name="ext/components/products/helloworld/dist/"/>
                <exclude name="ext/components/products/helloworld/nbproject/private/"/>
             </fileset>
         </copy>
    </target>

    <target name="clean" depends="projectized-common.clean">
	 
         <ant dir="${basedir}/../nbi/infra/build/.ant-lib" target="clean" inheritAll="false">
             <property name="no.dependencies" value="true"/>
             <property name="platforms.JDK_1.5.home" value="${nbjdk.home}"/>
         </ant>
         <ant dir="${basedir}/../nbi/infra/lib/registries-management" target="clean" inheritAll="false">
                <property name="platforms.JDK_1.5.home" value="${nbjdk.home}"/>
                <property name="no.dependencies" value="true"/>
         </ant>
	 
    </target>

</project>
