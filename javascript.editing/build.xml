<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See harness/README in the NetBeans platform -->
<!-- for some information on what you could do (e.g. targets to override). -->
<!-- If you delete this file and reopen the project it will be recreated. -->
<project name="javascript.editing" default="netbeans" basedir=".">
    <description>Builds, tests, and runs the project org.netbeans.modules.javascript.editing</description>
    <import file="../nbbuild/templates/projectized.xml"/>

    <target name="jar" depends="init,compile,jar-prep" unless="is.jar.uptodate">
        <taskdef name="csljar" classname="org.netbeans.modules.csl.CslJar" classpath="${nb_all}/csl.api/anttask/cslanttask.jar:${nb_all}/nbbuild/nbantext.jar"/>
         <csljar jarfile="${cluster}/${module.jar}" compress="${build.package.compress}" index="${build.package.index}" manifest="${manifest.mf}" stamp="${cluster}/.lastModified">
            <fileset dir="${build.classes.dir}"/>
        </csljar>
    </target>

    <target name="release" depends="init">
        <!-- Generated JavaScript files for core libraries, used by code completion
             etc. See the generatestubs project for details. -->
        <unzip dest="${cluster}" src="external/jsstubs.zip"/>
        <unzip dest="${cluster}" src="external/js-domstubs.zip"/>

        <!-- Don't make the files read-only since this is probably going
             to create headaches for Auto Update! My thought here was that
             users shouldn't be editing these files, so make them read-only
             to avoid accidental edits, but I really should be sticking these
             files in a Jar anyway; I will do that as soon as indexing works
             inside jars.
        <chmod perm="ugo-w">
          <fileset dir="${cluster}/">
            <include name="jsstubs/*"/>
          </fileset>
        </chmod>
        -->

        <unzip dest="${cluster}" src="external/preindexed.zip"/>
        <copy file="external/sdocs.zip" todir="${cluster}/jsstubs"/>
    </target>

</project>

