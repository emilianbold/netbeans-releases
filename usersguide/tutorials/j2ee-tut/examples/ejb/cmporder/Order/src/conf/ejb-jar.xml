<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar version="2.1" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd">
  <display-name>CmpOrder</display-name>
  <enterprise-beans>
    <session>
      <display-name>RequestSB</display-name>
      <ejb-name>RequestBean</ejb-name>
      <home>request.RequestRemoteHome</home>
      <remote>request.RequestRemote</remote>
      <ejb-class>request.RequestBean</ejb-class>
      <session-type>Stateless</session-type>
      <transaction-type>Container</transaction-type>
      <ejb-local-ref>
        <ejb-ref-name>ejb/Lineitem</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>dataregistry.LineItemLocalHome</local-home>
        <local>dataregistry.LineItemLocal</local>
        <ejb-link>LineitemBean</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
        <ejb-ref-name>ejb/Orders</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>dataregistry.OrdersLocalHome</local-home>
        <local>dataregistry.OrdersLocal</local>
        <ejb-link>OrdersBean</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
        <ejb-ref-name>ejb/Part</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>dataregistry.PartLocalHome</local-home>
        <local>dataregistry.PartLocal</local>
        <ejb-link>PartBean</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
        <ejb-ref-name>ejb/Vendor</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>dataregistry.VendorLocalHome</local-home>
        <local>dataregistry.VendorLocal</local>
        <ejb-link>VendorBean</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
        <ejb-ref-name>ejb/VendorPart</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>dataregistry.VendorPartLocalHome</local-home>
        <local>dataregistry.VendorPartLocal</local>
        <ejb-link>VendorPartBean</ejb-link>
      </ejb-local-ref>
    </session>
    <entity>
      <description>jdbc:pointbase://localhost/order [order on ORDER]</description>
      <display-name>VendorEB</display-name>
      <ejb-name>VendorBean</ejb-name>
      <local-home>dataregistry.VendorLocalHome</local-home>
      <local>dataregistry.VendorLocal</local>
      <ejb-class>dataregistry.VendorBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>dataregistry.VendorKey</prim-key-class>
      <reentrant>false</reentrant>
      <abstract-schema-name>Vendor</abstract-schema-name>
      <cmp-field>
        <description/>
        <field-name>vendorId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>name</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>address</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>contact</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>phone</field-name>
      </cmp-field>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByVendorId</method-name>
          <method-params>
            <method-param>java.lang.Integer</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(v) FROM Vendor AS v WHERE v.vendorId = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByName</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(v) FROM Vendor AS v WHERE v.name = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByAddress</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(v) FROM Vendor AS v WHERE v.address = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByContact</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(v) FROM Vendor AS v WHERE v.contact = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByPhone</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(v) FROM Vendor AS v WHERE v.phone = ?1</ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByPartialName</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(o) 
FROM Vendor o
WHERE LOCATE(?1,o.name) &gt; 0</ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByOrder</method-name>
          <method-params>
            <method-param>java.lang.Integer</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT DISTINCT l.vendorPartNumber.vendor 
FROM Orders o, IN (o.lineitemBean) AS l
WHERE o.orderId = ?1 ORDER BY 
l.vendorPartNumber.vendor.name</ejb-ql>
      </query>
    </entity>
    <entity>
      <description>jdbc:pointbase://localhost/order [order on ORDER]</description>
      <display-name>PartEB</display-name>
      <ejb-name>PartBean</ejb-name>
      <local-home>dataregistry.PartLocalHome</local-home>
      <local>dataregistry.PartLocal</local>
      <ejb-class>dataregistry.PartBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>dataregistry.PartPK</prim-key-class>
      <reentrant>false</reentrant>
      <abstract-schema-name>Part</abstract-schema-name>
      <cmp-field>
        <field-name>partNumber</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>revision</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>description</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>revisionDate</field-name>
      </cmp-field>
      <cmp-field>
        <description/>
        <field-name>drawing</field-name>
      </cmp-field>
      <cmp-field>
        <description/>
        <field-name>specification</field-name>
      </cmp-field>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByPartNumber</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(p) FROM Part AS p WHERE p.partNumber = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByRevision</method-name>
          <method-params>
            <method-param>java.math.BigDecimal</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(p) FROM Part AS p WHERE p.revision = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByDescription</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(p) FROM Part AS p WHERE p.description = ?1</ejb-ql>
      </query>
    </entity>
    <entity>
      <description>jdbc:pointbase://localhost/order [order on ORDER]</description>
      <display-name>LineitemEB</display-name>
      <ejb-name>LineitemBean</ejb-name>
      <local-home>dataregistry.LineItemLocalHome</local-home>
      <local>dataregistry.LineItemLocal</local>
      <ejb-class>dataregistry.LineItemBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>dataregistry.LineItemPK</prim-key-class>
      <reentrant>false</reentrant>
      <abstract-schema-name>Lineitem</abstract-schema-name>
      <cmp-field>
        <field-name>orderId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>itemId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>quantity</field-name>
      </cmp-field>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByOrderId</method-name>
          <method-params>
            <method-param>java.lang.Integer</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(l) FROM Lineitem AS l WHERE l.orderId = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByItemId</method-name>
          <method-params>
            <method-param>java.math.BigDecimal</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(l) FROM Lineitem AS l WHERE l.itemId = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByQuantity</method-name>
          <method-params>
            <method-param>java.math.BigDecimal</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(l) FROM Lineitem AS l WHERE l.quantity = ?1</ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findAll</method-name>
          <method-params/>
        </query-method>
        <ejb-ql>SELECT OBJECT(o) 
FROM Lineitem o</ejb-ql>
      </query>
    </entity>
    <entity>
      <description>jdbc:pointbase://localhost/order [order on ORDER]</description>
      <display-name>VendorPartEB</display-name>
      <ejb-name>VendorPartBean</ejb-name>
      <local-home>dataregistry.VendorPartLocalHome</local-home>
      <local>dataregistry.VendorPartLocal</local>
      <ejb-class>dataregistry.VendorPartBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Object</prim-key-class>
      <reentrant>false</reentrant>
      <abstract-schema-name>VendorPart</abstract-schema-name>
      <cmp-field>
        <field-name>description</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>price</field-name>
      </cmp-field>
      <primkey-field/>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByDescription</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(v) FROM VendorPart AS v WHERE v.description = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByPrice</method-name>
          <method-params>
            <method-param>java.lang.Double</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(v) FROM VendorPart AS v WHERE v.price = ?1</ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>ejbSelectAvgPrice</method-name>
          <method-params/>
        </query-method>
        <ejb-ql>SELECT AVG(o.price) 
FROM VendorPart o</ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>ejbSelectTotalPricePerVendor</method-name>
          <method-params>
            <method-param>int</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT SUM(o.price) 
FROM VendorPart o
WHERE o.vendor.vendorId = ?1</ejb-ql>
      </query>
    </entity>
    <entity>
      <description>jdbc:pointbase://localhost/order [order on ORDER]</description>
      <display-name>OrdersEB</display-name>
      <ejb-name>OrdersBean</ejb-name>
      <local-home>dataregistry.OrdersLocalHome</local-home>
      <local>dataregistry.OrdersLocal</local>
      <ejb-class>dataregistry.OrdersBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <abstract-schema-name>Orders</abstract-schema-name>
      <cmp-field>
        <field-name>orderId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>status</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>lastUpdate</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>discount</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>shipmentInfo</field-name>
      </cmp-field>
      <primkey-field>orderId</primkey-field>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByOrderId</method-name>
          <method-params>
            <method-param>java.lang.Integer</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(o) FROM Orders AS o WHERE o.orderId = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByStatus</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(o) FROM Orders AS o WHERE o.status = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByDiscount</method-name>
          <method-params>
            <method-param>java.math.BigDecimal</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(o) FROM Orders AS o WHERE o.discount = ?1</ejb-ql>
      </query>
      <query>
        <description>auto generated method</description>
        <query-method>
          <method-name>findByShipmentInfo</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>SELECT OBJECT(o) FROM Orders AS o WHERE o.shipmentInfo = ?1</ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>ejbSelectAll</method-name>
          <method-params/>
        </query-method>
        <ejb-ql>SELECT OBJECT(o) 
FROM Orders o</ejb-ql>
      </query>
    </entity>
  </enterprise-beans>
  <relationships>
    <ejb-relation>
      <ejb-relation-name>PartBean-PartBean</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>PartBean</ejb-relationship-role-name>
        <multiplicity>Many</multiplicity>
        <cascade-delete/>
        <relationship-role-source>
          <ejb-name>PartBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>bomPart</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>PartBean1</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>PartBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>partBean1</cmr-field-name>
          <cmr-field-type>java.util.Collection</cmr-field-type>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>LineitemBean-OrdersBean</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>LineitemBean</ejb-relationship-role-name>
        <multiplicity>Many</multiplicity>
        <cascade-delete/>
        <relationship-role-source>
          <ejb-name>LineitemBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>ordersBean</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>OrderId</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>OrdersBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>lineitemBean</cmr-field-name>
          <cmr-field-type>java.util.Collection</cmr-field-type>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>LineitemBean-VendorPartBean</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>LineitemBean</ejb-relationship-role-name>
        <multiplicity>Many</multiplicity>
        <cascade-delete/>
        <relationship-role-source>
          <ejb-name>LineitemBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>vendorPartNumber</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>VendorPartNumber</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>VendorPartBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>lineitemBean</cmr-field-name>
          <cmr-field-type>java.util.Collection</cmr-field-type>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>VendorPartBean-PartBean</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>VendorPartBean</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <cascade-delete/>
        <relationship-role-source>
          <ejb-name>VendorPartBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>partBean</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>PartBean</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>PartBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>vendorPartBean</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <description/>
      <ejb-relation-name>VendorPartBean-VendorBean</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>VendorPartBean</ejb-relationship-role-name>
        <multiplicity>Many</multiplicity>
        <cascade-delete/>
        <relationship-role-source>
          <ejb-name>VendorPartBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>vendor</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>VendorId</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>VendorBean</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>vendorPartBean</cmr-field-name>
          <cmr-field-type>java.util.Collection</cmr-field-type>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
  </relationships>
  <assembly-descriptor>
    <container-transaction>
      <method>
        <ejb-name>VendorBean</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>PartBean</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>LineitemBean</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>VendorPartBean</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>OrdersBean</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>RequestBean</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
  </assembly-descriptor>
</ejb-jar>
